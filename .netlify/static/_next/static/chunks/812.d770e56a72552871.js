"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[812],{812:function(e,t,s){s.r(t),s.d(t,{default:function(){return v}});var i=s(7437),r=s(2265),a=s(961),l=s(4725),n=s(7922),o=s(5903),c=s(2097),d=s(8685),h=s(9285);function m(e){let{vehicle:t,isSelected:s,isHovered:a,position:l,onClick:n,onPointerOver:o,onPointerOut:c}=e,d=(0,r.useRef)(null);(0,h.F)((e,t)=>{d.current&&!s&&t<.1&&(d.current.rotation.y+=.5*t)});let m=(()=>{switch(t.type){case"sedan":return{width:1,height:.6,depth:2};case"van":return{width:1.2,height:1.2,depth:2.5};case"bus":return{width:1.5,height:2,depth:4};default:return{width:1,height:1,depth:2}}})();return(0,i.jsxs)("group",{position:l,scale:a?1.1:s?1.05:1,children:[(0,i.jsxs)("mesh",{ref:d,onClick:e=>{e.stopPropagation(),n()},onPointerOver:e=>{e.stopPropagation(),o()},onPointerOut:e=>{e.stopPropagation(),c()},castShadow:!0,receiveShadow:!0,children:[(0,i.jsx)("boxGeometry",{args:[m.width,m.height,m.depth]}),(0,i.jsx)("meshStandardMaterial",{color:s?t.color:a?"#FF6B35":"#666666",metalness:.3,roughness:.4,emissive:s?t.color:"#000000",emissiveIntensity:s?.3:0})]}),(0,i.jsxs)("mesh",{position:[0,.3*m.height,.2*m.depth],children:[(0,i.jsx)("boxGeometry",{args:[.8*m.width,.4*m.height,.3*m.depth]}),(0,i.jsx)("meshStandardMaterial",{color:"#87CEEB",transparent:!0,opacity:.6,metalness:.8,roughness:.1})]}),[-1,1].map(e=>(0,i.jsxs)("group",{children:[(0,i.jsxs)("mesh",{position:[e*m.width*.6,-(.3*m.height),.3*m.depth],children:[(0,i.jsx)("cylinderGeometry",{args:[.2,.2,.1,16]}),(0,i.jsx)("meshStandardMaterial",{color:"#1A1A1A",metalness:.8,roughness:.2})]}),(0,i.jsxs)("mesh",{position:[e*m.width*.6,-(.3*m.height),-(.3*m.depth)],children:[(0,i.jsx)("cylinderGeometry",{args:[.2,.2,.1,16]}),(0,i.jsx)("meshStandardMaterial",{color:"#1A1A1A",metalness:.8,roughness:.2})]})]},e)),s&&(0,i.jsxs)("mesh",{position:[0,0,0],children:[(0,i.jsx)("boxGeometry",{args:[m.width+.2,m.height+.2,m.depth+.2]}),(0,i.jsx)("meshStandardMaterial",{color:t.color,transparent:!0,opacity:.2,emissive:t.color,emissiveIntensity:.5})]})]})}var x=s(521);function p(e){let{vehicle:t,isSelected:s,onClick:r}=e;return(0,i.jsxs)(x.E.div,{onClick:r,className:"p-2 sm:p-3 rounded-lg border-2 cursor-pointer transition-all ".concat(s?"border-swvl-primary bg-gradient-to-br from-swvl-primary/10 to-swvl-accent/10 shadow-md":"border-swvl-gray-200 bg-white hover:border-swvl-gray-300 hover:shadow-sm"),whileHover:{scale:1.03,y:-2},whileTap:{scale:.97},transition:{type:"spring",stiffness:300,damping:20},children:[(0,i.jsx)("div",{className:"text-2xl sm:text-3xl mb-1 sm:mb-2",children:t.icon}),(0,i.jsx)("h3",{className:"font-semibold text-swvl-dark mb-0.5 sm:mb-1 text-xs sm:text-sm",children:t.name}),(0,i.jsxs)("p",{className:"text-xs text-swvl-gray-500",children:["Capacity: ",t.capacity]}),s&&(0,i.jsx)(x.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"mt-1 sm:mt-2 text-swvl-primary font-medium text-xs sm:text-sm",children:"âœ“ Selected"})]})}var u=s(8614),g=s(1616);class j extends r.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("VehicleSelector error:",e,t)}render(){return this.state.hasError?(0,i.jsxs)(x.E.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full h-full flex flex-col items-center justify-center p-8 bg-swvl-light rounded-xl",children:[(0,i.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDE97"}),(0,i.jsx)("h3",{className:"text-lg font-semibold text-swvl-dark mb-2",children:"Unable to load 3D vehicle selector"}),(0,i.jsx)("p",{className:"text-sm text-swvl-gray-500 mb-4 text-center",children:"Please use the vehicle cards below to select your fleet."}),(0,i.jsx)("button",{onClick:()=>this.setState({hasError:!1}),className:"px-4 py-2 bg-swvl-primary text-white rounded-lg hover:bg-opacity-90 transition-colors",children:"Try Again"})]}):this.props.children}constructor(e){super(e),this.state={hasError:!1}}}function v(){let e=(0,c.q)(e=>e.selectedVehicles),t=(0,c.q)(e=>e.setSelectedVehicles),[s,h]=(0,r.useState)(null),[v,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{y(!0)},[]);let b=s=>{e.some(e=>e.id===s.id)?t(e.filter(e=>e.id!==s.id)):t([...e,s])},f=t=>e.some(e=>e.id===t),w=(e,t)=>{let s=e/t*Math.PI*2;return[3*Math.cos(s),0,3*Math.sin(s)]};return(0,i.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,i.jsxs)("div",{className:"mb-3 sm:mb-4",children:[(0,i.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-swvl-dark mb-1 sm:mb-2",children:"Choose Your Fleet"}),(0,i.jsx)("p",{className:"text-xs sm:text-sm text-swvl-gray-500",children:"Select the vehicles that best fit your needs, or let our system optimize automatically"})]}),(0,i.jsx)("div",{className:"flex-1 relative bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 rounded-xl overflow-hidden mb-3 sm:mb-4 border border-white/50 shadow-inner min-h-[300px]",children:v?(0,i.jsx)(j,{children:(0,i.jsx)(r.Suspense,{fallback:(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)(g.Z,{size:"lg"})}),children:(0,i.jsxs)(a.Xz,{shadows:!0,gl:{antialias:!0,alpha:!0,powerPreference:"high-performance"},children:[(0,i.jsx)(l.c,{makeDefault:!0,position:[0,5,8],fov:50}),(0,i.jsx)("ambientLight",{intensity:.6}),(0,i.jsx)("directionalLight",{position:[10,10,5],intensity:.8,castShadow:!0}),(0,i.jsx)("pointLight",{position:[-10,-10,-5],intensity:.4}),(0,i.jsx)(n.qA,{preset:"sunset"}),d.jd.map((e,t)=>(0,i.jsx)(m,{vehicle:e,isSelected:f(e.id),isHovered:s===e.id,position:w(t,d.jd.length),onClick:()=>b(e),onPointerOver:()=>h(e.id),onPointerOut:()=>h(null)},e.id)),(0,i.jsx)(o.z,{enableZoom:!0,enablePan:!1,minDistance:6,maxDistance:12,autoRotate:!1,enableDamping:!0,dampingFactor:.05})]})})}):(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)(g.Z,{size:"lg"})})}),(0,i.jsx)("div",{className:"grid grid-cols-3 gap-2 sm:gap-3",children:(0,i.jsx)(u.M,{children:d.jd.map(e=>(0,i.jsx)(x.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,i.jsx)(p,{vehicle:e,isSelected:f(e.id),onClick:()=>b(e)})},e.id))})}),e.length>0&&(0,i.jsx)(x.E.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-4 p-3 bg-swvl-primary bg-opacity-10 rounded-lg",children:(0,i.jsxs)("p",{className:"text-sm text-swvl-dark",children:[(0,i.jsx)("span",{className:"font-semibold",children:e.length})," vehicle(s) selected"]})})]})}}}]);